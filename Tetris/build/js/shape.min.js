function Cell(a,d,b){this.r=a;this.c=d;this.src=b}function Shape(a,e,d,c){this.cells=[];for(var b=0;b<4;b++){this.cells.push(new Cell(a[2*b],a[2*b+1],e))}this.states=d;this.orgCell=this.cells[c];this.statei=0}function State(a){for(var b=0;b<4;b++){this["r"+b]=a[2*b];this["c"+b]=a[2*b+1]}}Shape.prototype={IMGS:{T:"img/T.png",O:"img/O.png",I:"img/I.png"},moveDown:function(){for(var a=0;a<this.cells.length;a++){this.cells[a].r++}},moveLeft:function(){for(var a=0;a<this.cells.length;a++){this.cells[a].c--}},moveRight:function(){for(var a=0;a<this.cells.length;a++){this.cells[a].c++}},rotateR:function(){this.statei++;if(this.statei===this.states.length){this.statei=0}this.rotate()},rotateL:function(){this.statei--;if(this.statei<0){this.statei=this.states.length-1}this.rotate()},rotate:function(){var c=this.states[this.statei];for(var b=0;b<this.cells.length;b++){var a=this.cells[b];a.r=this.orgCell.r+c["r"+b];a.c=this.orgCell.c+c["c"+b]}},};function T(){Shape.call(this,[0,3,0,4,0,5,1,4],this.IMGS.T,[new State([0,-1,0,0,0,+1,+1,0]),new State([-1,0,0,0,+1,0,0,-1]),new State([0,+1,0,0,0,-1,-1,0]),new State([+1,0,0,0,-1,0,0,+1]),],1)}Object.setPrototypeOf(T.prototype,Shape.prototype);function O(){Shape.call(this,[0,4,0,5,1,4,1,5],this.IMGS.O,[new State([0,-1,0,0,+1,-1,+1,0])],1)}Object.setPrototypeOf(O.prototype,Shape.prototype);function I(){Shape.call(this,[0,3,0,4,0,5,0,6],this.IMGS.I,[new State([0,-1,0,0,0,+1,0,+2]),new State([-1,0,0,0,+1,0,+2,0])],1)}Object.setPrototypeOf(I.prototype,Shape.prototype);